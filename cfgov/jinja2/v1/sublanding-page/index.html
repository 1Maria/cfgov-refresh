{% extends 'layout-2-1-bleedbar.html' %}

{% block title -%}
    {{ page.seo_title }}
{%- endblock %}

{% block hero -%}
    {% for block in page.header -%}
        {% if 'hero' in block.block_type -%}
            {{ render_stream_child(block) }}
        {%- endif %}
    {%- endfor %}
{% endblock %}

{% block pre_content %}
    {% set hero_exists = false %}
    {% for block in page.header %}
        {% set hero_exists = true if 'hero' in block.block_type else false %}
    {% endfor %}
    {% if not hero_exists %}
        {% include 'organisms/sidebar-breakout.html' %}
    {% endif %}
{% endblock %}

{% block content_main %}
    {% for block in page.content -%}
        {% if 'text_introduction' not in block.block_type
           and 'hero' not in block.block_type %}
            {% if 'heading' in block.block_type %}
                <h2>{{ block }}</h2>
            {% else %}
                {{ render_stream_child(block) }}
            {% endif %}
        {% endif %}
    {%- endfor %}
{% endblock %}

{% block content_sidebar scoped -%}
    {% for block in page.sidefoot -%}
        {% if 'related_posts' in block.block_type %}
            {% import 'molecules/related-posts.html' as related_posts with context %}
            {{ related_posts.render(block) }}
        {% elif 'email_signup' in block.block_type %}
            {{ render_stream_child(block) }}
        {% else %}
            {{ block | safe }}
        {% endif %}
    {%- endfor %}
{%- endblock %}
