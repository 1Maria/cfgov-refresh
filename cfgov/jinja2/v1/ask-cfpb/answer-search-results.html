{% import 'molecules/pagination.html' as pagination with context %}
{% import 'ask/ask-search-bar.html' as ask_search_bar with context %}

{% extends 'layout-side-nav.html' %}

{% block content_modifiers -%}
    {{ super() }} content__hide-horizontal-overflow
{%- endblock %}

{% block content_wrapper_modifiers -%}
    {{ super() }} content_wrapper__full-height-left-sidebar ask-search-page ask-cfpb-page
{%- endblock %}

{% block content_main_modifiers -%}
    {{ super() }} content__flush-bottom search-page
{%- endblock %}

{% block content_main %}
    <div class="block
                block__flush-top">
    <h1>Ask CFPB</h1>
  
    {{ ask_search_bar.render( 'right', '', 'block__bg-branded u-mt30 u-mb30' ) }}

    {% if page.answers %}
        <h3 class="results-header">Results for ‘{{page.query}}’</h3>
        <section class="search-results block
                    block__flush-top">
        <div class="question_list">

        {% for pairing in page.answers %}
            <article class="question_summary question_summary__full">
                <p class="question_title"><a href="{{pairing[0]}}" class="kbq">{{ pairing[1]|safe }}</a></p>
                <p class="qans">{{ pairing[2]|safe|striptags|truncate}}</p>
            </article>
        {% endfor %}

        </div>

        <div class="block block__sub">
            {{ pagination.render( paginator.num_pages, current_page | int, '', index, 'Previous', 'Next' ) }}
        </div>
        </section>
    {% else %}
    <section class="search-results block
                    block__flush-top">
        <div class="no-results-message">
            <h2 class="results-header">No results found</h2>
            <p class="short-desc u-mb30">Can't find your question? <a href="/askcfpb">Browse questions by category</a>
            </p>
        </div>
    </section>
    {% endif %}
    </div>

{% endblock %}

