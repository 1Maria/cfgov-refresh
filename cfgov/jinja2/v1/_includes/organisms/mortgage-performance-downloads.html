
{# ==========================================================================

   Mortgage performance downloads

   ==========================================================================

   Description:

   A full width organism for automating display of mortgage data archives.
   See [GHE]/flapjack/Modules-V1/wiki/Data-downloads

   ========================================================================== #}
{% set archive_30_60 = download_files[thru_month]['percent_30_60'] %}
{% set archive_90 = download_files[thru_month]['percent_90'] %}

<div class="o-full-width-text-group">
    <div class="m-full-width-text">
        <h2>The most recent data</h2>
        <p>We recommend using the most recent data, which include the full time series and all revisions. Published in {{ pub_date_formatted }}, these data cover January 2008 - {{ thru_month_formatted }}.</p>      
    </div>
</div>

<div class="block">
<table class="o-table">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">
                <p>States</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Metro and non-metro areas</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Counties</p>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <p>Mortgages 30-89 days delinquent</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['State']['url'] }}">CSV</a> ({{ archive_30_60['State']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['MetroArea']['url'] }}">CSV</a> ({{ archive_30_60['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['County']['url'] }}">CSV</a> ({{ archive_30_60['County']['size'] }})</p>
            </td>
        </tr>                
        <tr>
            <td>
                <p>Mortgages 90 or more days delinquent</p>
            </td>
            <td>
                <p><a href="{{ archive_90['State']['url'] }}">CSV</a> ({{ archive_90['State']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_90['MetroArea']['url'] }}">CSV</a> ({{ archive_90['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_90['County']['url'] }}">CSV</a> ({{ archive_90['County']['size'] }})</p>
            </td>
        </tr>
    </tbody>
</table>
</div>

{% if value.show_archives and archive_dates %}
<div class="o-full-width-text-group">
    <div class="m-full-width-text">
        <h2>Archived versions</h2>
        <p>All archived versions have data series that begin January 2008.</p><br>
    </div>
</div>
{% for date in archive_dates %}
{% set archive_30_60 = download_files[date]['percent_30_60'] %}
{% set archive_90 = download_files[date]['percent_90'] %}
<div class="o-full-width-text-group">
    <div class="m-full-width-text">
        <h4> Data through {{ download_files[date]['thru_month'] }},  published in {{ download_files[date]['pub_date'] }}

    </div>
</div>
<div class="block block__flush-top">
<table class="o-table">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">
                <p>States</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Metro and non-metro areas</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Counties</p>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <p>Mortgages 30-89 days delinquent</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['State']['url'] }}">CSV</a> ({{ archive_30_60['State']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['MetroArea']['url'] }}">CSV</a> ({{ archive_30_60['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_30_60['County']['url'] }}">CSV</a> ({{ archive_30_60['County']['size'] }})</p>
            </td>
        </tr>                
        <tr>
            <td>
                <p>Mortgages 90 or more days delinquent</p>
            </td>
            <td>
                <p><a href="{{ archive_90['State']['url'] }}">CSV</a> ({{ archive_90['State']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_90['MetroArea']['url'] }}">CSV</a> ({{ archive_90['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a href="{{ archive_90['County']['url'] }}">CSV</a> ({{ archive_90['County']['size'] }})</p>
            </td>
        </tr>
    </tbody>
</table>
</div>
{% endfor %}
{% endif %}
