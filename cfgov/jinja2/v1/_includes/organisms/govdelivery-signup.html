{# ==========================================================================

   govdelivery_signup.render()

   ==========================================================================

   Description:

   Creates a GovDelivery sign-up form when given:

   value:                             An object used to customize the markup.

   value.heading:                     A string with the title for the header
                                      slug.

   value.text:                        A string for introductory text.

   value.gd_code:                     A GovDelivery code for a specified
                                      mailing list.

   value.allow_text_message_signups:  A boolean to conditionally allow
                                      submitting a phone number to receive
                                      text messages.

   value.form_fields:                  A list of FormFieldWithButton blocks to
                                      render within the form.

   ========================================================================== #}

<div class="o-email-signup">
{% if value.heading %}
    <header class="m-slug-header">
        <h2 class="a-heading">
            {{ value.heading }}
        </h2>
    </header>
{% endif %}

<form id="{{ value.id or ('o-email-signup_' ~ range(1, 100) | random) }}"
      class="o-form o-form__email-signup"
      action="/subscriptions/new/"
      method="POST"
      enctype="application/x-www-form-urlencoded">
    <div class="u-mb15">
	    {% import 'molecules/notification.html' as notification with context %}
	    {{ notification.render('success', false, '') }}
	</div>
{% if value.text %}
    <p>
        {{ value.text }}
    </p>
{% endif %}

{% set field_name = 'contact_info' %}
{% for field in value.form_fields %}
    {% include_block field %}
{% endfor %}

    <div class="form-group">
        <input type="hidden" name="code" value="{{ value.gd_code }}">
    {% if value.allow_text_message_signups %}
        <input type="hidden" name="accept_phone">
    {% endif %}
    </div>
</form>
</div>
