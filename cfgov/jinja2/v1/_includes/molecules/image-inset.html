{# ==========================================================================

    Image Inset

    ==========================================================================

    Description:

    Creates image inset markup when given:

    value:                   Object defined from a StreamField block.

    value.heading:           The heading of the image inset.

    value.image:             A basic image object to insert.

    value.image.upload:      The image object.

    value.image.alt:         String for alt text for screenreaders.

    value.paragraph:         String for text below the image.

    value.is_image_left:     Boolean indicating whether to float the image
                             to the left.

    value.image_width:       String representing the image width.
                             Possible values: (150, 270, 300).
                             Defaults to 270.

   ========================================================================== #}

{% set image = image(value.image.upload, 'original') %}
<div class="m-inset
            m-inset__image
            {{ 'm-inset__image__left' if value.is_image_left else '' }}
            {{ 'm-inset__image__' ~ ( value.image_width
               if value.image_width else '270' ) }}
            {{ 'm-inset__image__portrait'
               if image.height > image.width else 'landscape' }}
            {{ 'm-inset__image__crop' if image.width < 601 else '' }} ">
    {% if value.heading %}
    <h2 class="header-slug">
        <span class="header-slug_inner">
            {{ value.heading }}
        </span>
    </h2>
    {% endif %}
    <div class="m-inset_image-container">
        {% if value.is_image_decorative %}
        <div class="m-inset_image"
             style="background-image: url( {{ image.url }} );
                    height:{{ image.height * value.image_width | int /  image.width }}px;
                    max-width: {{ image.width }}px">
        </div>
        {% else %}
        <img class="m-inset_image"
             src="{{ image.url }}"
             alt="{{ value.image.alt if value.image.alt else '' }}">
        {% endif %}
    </div>
    {% if value.paragraph %}
        {{ parse_links(value.paragraph) | safe }}
    {% endif %}
</div>
