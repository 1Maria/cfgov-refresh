{# ==========================================================================

   Notification

   ==========================================================================

   Description:

   Builds notification markup when given:

   value.is_visible:  Whether the notification is initially shown or not.
                      Default is false.

   value.type:        The type of notification to display.
                      Values may be: 'success', 'error', or 'warning'.

   value.message:     Text to display within the notification markup.
                      Default is 'Success.', 'Warning!', or 'Error!',
                      depending on notification type.

   value.explanation: Text to display as an explanation
                      within the notification markup.

   ========================================================================== #}

{% if not value %}
    {% do global_dict.update(
        {
            'notification': {
                'is_visible': false,
                'type': 'success',
                'message': 'Success!',
                'explanation': 'Explanation text paragraph.'
            }
        })
    %}
{% endif %}
{% set value = value or global_dict.notification %}

{% set is_visible = value.is_visible if value.is_visible else false %}
{% set type  =  value.type if value.type in ['success', 'warning', 'error'] else 'success' %}
{% set type_lookup  = {
      'success' : ('approved', 'Success.'),
      'warning' : ('error', 'Warning!'),
      'error'   :  ('delete', 'Error!')
    }
%}
{% set icon, message = type_lookup[type]  %}
{% set message  =  value.message | default( message ) %}

{% set notification_type = ('m-notification__' + type) if type %}
<div class="m-notification
            {{ notification_type }}
            {{ 'm-notification__visible' if is_visible else '' }}">
    <span class="m-notification_icon
                 cf-icon"></span>
    <div class="m-notification_content">
        <p class="h4 m-notification_message">{{ message }}</p>
        {% if value.explanation %}
            <p class="h4 m-notification_explanation">{{ value.explanation }}</p>
        {% endif %}
    </div>
</div>
