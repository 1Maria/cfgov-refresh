{% extends "base.html" %}

{% block title %}Blog{% endblock %}
{% block demo_title %}Blog listing{% endblock %}

{% block content %}

    <main class="content content__2-1 content__bleedbar" id="main" role="main">

        <section class="content_hero hero" style="background-color:#337E7D;">
            <div class="hero_wrapper">
                <div class="hero_card">
                    <div class="hero_card-bg">
                        <div class="hero_card-padding">
                            <a href="#" class="category-slug">
                                <span class="cf-icon cf-icon-help"></span>
                                <span class="u-visually-hidden">Category:</span>
                                Announcements &amp; updates
                            </a>
                            <a class="summary" href="#">
                                <h1 class="summary_header">Preventing illegal discrimination in auto lending</h1>
                                <p class="summary_text">Every year, millions of American families buy a car â€“ and it will be one of the most significant purchases they make. One key priority for us is protecting consumers from the silent pickpocket of discrimination.</p>
                                <p class="summary_byline">By Patrice Ficklin</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero_img-container hero_img-container__small">
                <div class="hero_img"
                     style="background-image:url(../static/img/hero-small.png);">
                </div>
            </div>
            <div class="hero_img-container hero_img-container__large">
                <div class="hero_img"
                     style="background-image:url(../static/img/hero-large.png);">
                </div>
            </div>
        </section><!-- END .content_hero -->

        <!-- .content_bar must come after .content_hero but before .content_wrapper -->
        <div class="content_bar"></div>

        <div class="wrapper content_wrapper">
            <section class="content_main">

            {% set posts = queries.posts.search_with_url_arguments(size=3) %}

            <div class="expandable">
                <div class="expandable_header expandable_header__spaced">
                    <!-- <h5>Blog filtered by</h5>
                    <ul class="list list__horizontal">
                        <li class="list_item"><a href="?filter_category=consumer">Consumer</a></li>
                    </ul> -->
                    <a class="expandable_target btn btn-secondary"
                       href="#post-filters-form">
                        Filter posts&nbsp;&nbsp;
                        <span class="expandable_cue-open">
                            <span class="cf-icon cf-icon-down"></span>
                        </span>
                        <span class="expandable_cue-close">
                            <span class="cf-icon cf-icon-up"></span>
                        </span>
                    </a>
                </div>
                <div class="expandable_content padded-container">
                    <form class="padded-container_body" id="post-filters-form" method="get">
                        <div class="form-l form-l__flush">
                            <div class="form-l_col form-l_col-1-3">
                                <div class="form-group">
                                    <label class="form-label-header">
                                        Categories
                                    </label>
                                    <label class="form-group_item form-label">
                                        <input type="checkbox" name="filter_category" value="announcements">
                                        Announcements &amp; updates
                                    </label>
                                    <label class="form-group_item form-label">
                                        <input type="checkbox" name="filter_category" value="consumer">
                                        Consumer information
                                    </label>
                                    <label class="form-group_item form-label">
                                        <input type="checkbox" name="filter_category" value="engagement">
                                        Engagement
                                    </label>
                                    <label class="form-group_item form-label">
                                        <input type="checkbox" name="filter_category" value="innovation">
                                        Innovation &amp; data
                                    </label>
                                </div>
                            </div>
                            <div class="form-l_col form-l_col-1-3">
                                <div class="form-group">
                                    <label class="form-label-header">
                                        Topics
                                    </label>
                                    <!-- <input type="text" name="filter_tags" value=""> -->
                                    <select name="filter_tags"> 
                                        <option value="">Select a topic</option>
                                        {% for tags in queries.posts.possible_values_for('tags') %}
                                        <option value="{{tags.term}}">{{tags.term|capitalize}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label-header">
                                        Author
                                    </label>
                                    <!-- <input type="text" name="filter_author" value=""> -->
                                    <select name="filter_author"> 
                                        <option value="">Select an author</option>
                                        {% for author in queries.posts.possible_values_for('author') %}
                                        <option value="{{author.term}}">{{author.term}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-l_col form-l_col-1-3">
                                <div class="form-group">
                                    <label class="form-label-header">
                                        Date range
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions form-actions__right-on-med">
                            <input type="reset" value="Reset filters" class="btn btn-warning btn-link form-actions_item">
                            <input type="submit" value="Apply filters" class="btn form-actions_item">
                        </div>
                    </form>
                </div>
            </div><!-- END .expandable -->

            {% for post in posts %}
                <article class="post-preview">
                    <div class="meta-header">
                        <span class="date meta-header_right">
                            {{ post.date | date("%b %d, %Y") }}
                        </span>
                        <a href="#" class="category-slug meta-header_left">
                            <span class="cf-icon cf-icon-help"></span>
                            <span class="u-visually-hidden">Category:</span>
                            {{ post.category }}
                        </a>
                    </div>
                    <a class="summary" href="{{ post.permalink }}">
                        <h1 class="summary_header">{{ post.title }}</h1>
                        <p class="summary_text summary_text__max">{{ post.excerpt }}</p>
                        <p class="summary_byline">By {{ post.author }}</p>
                    </a>
                </article>
            {% endfor %}

                <nav class="post-pagination pagination" role="navigation" aria-label="Pagination">
                {% if posts.current_page > 1 %}
                    <a class="btn pagination_prev" href="{{ posts.url_for_page(posts.current_page - 1) }}">
                {% else %}
                    <a class="btn btn-disabled pagination_prev">
                {% endif %}
                        <span class="btn-icon-left cf-icon cf-icon-left"></span>
                        Newer
                    </a>
                {% if posts.current_page < posts.pages %}
                    <a class="btn pagination_next" href="{{ posts.url_for_page(posts.current_page + 1) }}">
                {% else %}
                    <a class="btn btn-disabled pagination_next">
                {% endif %}
                        Older
                        <span class="btn-icon-right cf-icon cf-icon-right"></span>
                    </a>
                    <form class="pagination_form">
                        <label class="pagination_label" for="pagination_current-page">
                            Page
                        </label>
                        <input class="pagination_current-page"
                               id="pagination_current-page"
                               name="page"
                               type="number"
                               min="1"
                               max="{{ posts.pages }}"
                               value="{{ posts.current_page }}" />
                        <label class="pagination_label" for="pagination_current-page">
                            of {{ posts.pages }}
                        </label>
                        <button class="btn btn-link pagination_submit" id="pagination_submit" type="submit">
                            Go
                        </button>
                    </form>
                </nav>

            </section><!-- END .content_main -->

            <aside class="content_sidebar">
                <section class="popular-stories">
                    <div class="demo-placeholder">popular stories placeholder</div>
                </section>
                <section class="related-links">
                    <div class="demo-placeholder">related links placeholder</div>
                </section>
                <section class="stay-informed">
                    <div class="demo-placeholder">stay informed placeholder</div>
                </section>
            </aside><!-- END .content_sidebar -->

        </div><!-- END .content_wrapper -->
    </main><!-- END .content -->

{% endblock content %}
