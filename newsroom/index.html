{% extends "base.html" %}

{% block demo_title -%}
    Newsroom listing
{%- endblock %}

{% block title -%}
    Newsroom
{%- endblock %}
{% block desc -%}
    Press releases, speeches, op-eds, testimony, and blog posts produced by our Office of Communications
{%- endblock %}

{% block content %}


    {# Variables #}

    {% set active_filters =
       selected_filters_for_field('category') +
       selected_filters_for_field('tags') +
       selected_filters_for_field('author')
    %}

    {% set active_date_filters =
       selected_filters_for_field('range_date_gte') + 
       selected_filters_for_field('range_date_lte')
    %}

    {% set active_filters_total = active_filters|length + active_date_filters|length %}

    {# Set a common 'query' variable to enable sharing of filtering functions
       between blog and newsroom. #}
    {% set query = queries.newsroom %}

    {% set newsroom = query.search_with_url_arguments(size=10) %}
    {% set view = get_document('views', 'newsroom') %}

    {# Set 'posts' to the newsroom query to enable
       some functions already developed for blog. #}
    {% set posts = newsroom %}

    {% set watchroom = queries.watchroom.search_with_url_arguments(size=1) %}

    {# Macros #}

    {% import "post-macros.html" as post_macros with context %}


    <main class="content content__1-3" id="main" role="main">

        <!-- .content_bar must come after .content_hero but before .content_wrapper -->
        <div class="content_bar"></div>

        <div class="wrapper content_wrapper">

            <aside class="content_sidebar">
                {% include "nav.html" %}
            </aside><!-- END .content_sidebar -->

            <section class="content_main">
                {% include "post-filters.html" %}
                {% include "watchroom.html" %}
                {% include "posts-paginated.html" %}
                <aside class="content_footer">
                    {% include "stay-informed.html" %}
                </aside>
                <aside class="content_footer content_footer__bg">
                    <section class="content_footer_item">
                        {% include "related-links.html" %}
                    </section>
                    <section class="content_footer_item">
                        {% include "upcoming-events.html" %}
                    </section>
                </aside>
            </section>

        </div><!-- END .content_wrapper -->
    </main><!-- END .content -->

{% endblock content %}
