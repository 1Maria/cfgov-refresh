language: python

python:
  - "2.7"

cache: pip

install:
  # Project configuration requirements.
  - export CXX=clang++
  - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash
  - nvm install 5.5.0
  - nvm use 5.5.0
  - npm install -g gulp

  # Project initialization.
  - pip install -r requirements/travis.txt
  - chmod +x ./frontend.sh
  - ./frontend.sh test

env:
  - TOXENV=py27 DJANGO_SETTINGS_MODULE=cfgov.settings.test DJANGO_STAGING_HOSTNAME=content.localhost

script:
  - gulp lint
  - gulp test:unit
  - tox -e travis

after_success:
  - coveralls
