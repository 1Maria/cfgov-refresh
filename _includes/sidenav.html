
{# ==========================================================================

   render()

   ==========================================================================

   Description:

   Create nav markup when given:

   items:               An array of tuples used to display nav items.
                        format: (href, id, caption)

   active_item_id:      A string indicating the id of the nav item
                        to be activated.

   additional_classes:  Extra classes you wish to add to the nav,
                        space separated.

   ========================================================================== #}

{% macro render(items, active_item_id, additional_classes) %}

<nav class="nav-secondary expandable {{ additional_classes }}">
    <h1 class="u-visually-hidden">
    {%- for href, id, caption in items %}
        {% if id == 'index' %}
            {{ caption|e }} navigation
        {% endif %}
    {%- endfor %}
    </h1>
    <div class="expandable_header">
        <button class="expandable_target nav-secondary_link nav-secondary_link__button">
            <span class="expandable_header-left">
              In this section
            </span>
            <span class="expandable_header-right">
                <span class="expandable_cue-open">
                    <span class="cf-icon cf-icon-down cf-icon__green"></span>
                </span>
                <span class="expandable_cue-close">
                    <span class="cf-icon cf-icon-up cf-icon__green"></span>
                </span>
            </span>
        </button>
    </div>
    <div class="expandable_content">
        <hr class="inset-divider" />
        <ul class="nav-secondary_list">
        {%- for href, id, caption in items %}
            {# TODO: logic around loop.index needs to be updated
                     so a parent item can appear before first item. #}
            <li class="nav-secondary_item
                       {{- ' nav-secondary_item__parent' if loop.index == 1 else
                       ' nav-secondary_item__child' -}}">
                {%- if id == active_item_id %}
                <a class="nav-secondary_link nav-secondary_link__current">
                  {{ caption|e }}
                </a>
                {%- else %}
                <a class="nav-secondary_link" href="{{ href|e }}">
                   {{ caption|e }}
                </a>
                {%- endif %}
            </li>
        {%- endfor %}
        </ul>
    </div>
</nav>

{% endmacro %}
